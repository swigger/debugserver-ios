INDIR=../../../
INCS=-I$(INDIR)tools/debugserver/source/MacOSX -I$(INDIR)tools/debugserver/source -I$(INDIR)tools/debugserver/source/MacOSX/DarwinLog
INCS+=-I$(INDIR)include -Iinc -Finc
MACROS=-Wparentheses -DWITH_LOCKDOWN -DWITH_FBS -DWITH_BKS
CFLAGS=$(INCS) $(MACROS)  -fno-objc-arc
CXXFLAGS=$(INCS) $(MACROS) -fno-objc-arc -std=c++11
LDFLAGS=-sectcreate __TEXT __info_plist info.plist -framework Foundation
LDFLAGS+=-Finc -framework SpringBoardServices  -framework BackBoardServices -framework FrontBoardServices -framework MobileCoreServices -framework AssertionServices
LDFLAGS+=-lcompression -llockdown -lc++

CC=aarch64-apple-darwin-gcc

all:

dbgnub-migServer.c dbgnub-migUser.c:$(INDIR)tools/debugserver/source/MacOSX/dbgnub-mig.defs
	aarch64-apple-darwin-mig  -header dbgnub-mig.h -user dbgnub-migUser.c -sheader dbgnub-migServer.h -server dbgnub-migServer.c  $^

clean_hc:
	-@ rm -f dbgnub-mig*

clean:clean_hc
